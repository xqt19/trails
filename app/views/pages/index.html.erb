<% if user_signed_in? %>
  <div class="profile-container">
    <div class="logout">
      <%= link_to "Logout", destroy_user_session_path, method: :delete, data: { confirm: "Confirm Logout?" }, class: "btn btn-lg btn-grey" %>
    </div>
    <h1><%= current_user.name %></h1>
    <% if current_user.photo.blank? %>
      <%= image_tag "placeholder.png", class: "avatar-large", crop: :fill %>
    <% else %>
      <%= cl_image_tag current_user.photo, radius: :max, width: 150, height: 150, crop: :fill, gravity: :face %>
    <% end %>
    <%= link_to 'Edit Profile', edit_user_path(current_user), class: "btn btn-lg btn-grey" %>
  </div>

  <div class="trail-container">
    <div class="trail-heading">
      <div class="trail-count">
        <h2>My <%= "Trail".pluralize(@trails_count) %></h2>
      </div>
      <div class="trail-options">
        <i class="fas fa-sliders-h fa-lg" style="text-shadow: 1px 1px 0 #dfdfdf; color: blue;"></i>
      </div>
      <%= link_to new_trail_path do %>
        <div class="trail-options">
          <i class="fas fa-plus fa-lg" style="text-shadow: 1px 1px 0 #dfdfdf; color: blue;"></i>
        </div>
      <% end %>
    </div>

    <% @trails&.each do |trail| %>
      <%= render 'trail_cards', trail: trail %>
    <% end %>

    <% if !@collabs.empty? %>
      <div class="collab-heading">
        <div class="collab-count">
          <h2>My <%= "Collab".pluralize(@collabs_count) %></h2>
        </div>
        <div class="collab-options">
          <i class="fas fa-sliders-h fa-lg" style="text-shadow: 1px 1px 0 #dfdfdf; color: blue;"></i>
        </div>
      </div>

      <% @collabs.each do |collab| %>
        <%= render 'trail_cards', trail: collab.trail %>
      <% end %>
    <% end %>
  </div>

<% else %>
  <div class="login-elements">
    <div class="animated bounceIn"><%= image_tag "trailexport.png", height: 220, width: 280, crop: :fill%></div>
    <div id="login-buttons" class="m-2 p-2 d-flex flex-column justify-content-center align-items-center text-center animated fadeIn delay-1s">
      <%= link_to "Login", new_user_session_path, class: "btn btn-lg btn-block btn-grey text-decoration-none" %>
      <%= link_to "Sign Up", new_user_registration_path, class: "btn btn-lg btn-block btn-grey text-decoration-none" %>
    </div>
  </div>
<% end %>


<style>
  .text-muted {
    background: 0;
  }
</style>


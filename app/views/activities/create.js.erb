function refreshForm(innerHTML) {
  const newActivityForm = document.getElementById('activity-form');
  newActivityForm.innerHTML = innerHTML;
}

function addActivity(activityHTML) {
  const activities = document.querySelector('.modal-footer');
  activities.insertAdjacentHTML('beforebegin', activityHTML);
}



var date = "card-container-<%= @activity.date.strftime('%Y-%m-%e')%>"
console.log(date)
var card = document.querySelector(`[data-id='${date}']`)
console.log(card)
function updateSmallCard(card, partial){
  card.innerHTML = partial
}


<% if @activity.errors.any? %>
refreshForm('<%= j render "activities/form", trail: @trail , activity: @activity, date: @activity.date  %>');
<% else %>
refreshForm('<%= j render "activities/form", trail: @trail , activity: Activity.new, date: @activity.date  %>');
addActivity('<%= j render "activities/card", activity: @activity %>');
updateSmallCard(card,  "<%= j render 'activities/small_card_content', activities: @activities, date: @activity.date, trail: @trail %>" )
if (document.querySelector("#activity-form")) document.querySelector("#activity-form").remove()
  function addSweetAlert(){
  var swalButtons = document.querySelectorAll('.trigger-alert-button');
  console.log(swalButtons)
  swalButtons.forEach((btn)=>{
    btn.addEventListener('click', (e)=>{
    var id = e.currentTarget.dataset.buttonId
      swal({
          title: "Are you sure?",
          text: "Delete this?",
          icon: "warning",
          buttons: true,
          dangerMode: true,
        }).then((value) => {
          if (value){
            document.querySelector(`[data-link-id='${id}']`).click()
          }
        })

    })
  })

}


addSweetAlert()

<% end %>


